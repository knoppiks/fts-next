name: fts-tca-its

services:
  ### gICS
  #  gics-db:
  #    image: creg.smith.care/fts/gics-db:2023.1.4@sha256:1c5a317df63be49c5a3fc9bce3cddec24e677e296f3a7b93f99f42ed6aceb5cf
  #    volumes:
  #    - ../../../../end-to-end-tests/gics/sqls/:/docker-entrypoint-initdb.d
  #    command: --max_allowed_packet=20M --default-time-zone=Europe/Berlin
  #    healthcheck:
  #      test: [ "CMD", "/usr/bin/mysqladmin", "ping", "-h", "localhost", "-ugics_user", "-pgics_password" ]
  #      interval: 5s
  #      timeout: 5s
  #      retries: 20
  #  gics:
  #    image: creg.smith.care/fts/gics:2023.1.4@sha256:093f317ad936ff8595105bf21abccd4ad33ddd066d132e5ba34d5b37e5b8bd62
  #    depends_on:
  #      gics-db:
  #        condition: service_healthy
  #    entrypoint: /bin/bash
  #    command: -c "./wait-for-it.sh gics-db:3306 -t 120 && ./run.sh"
  #    healthcheck:
  #      test: [ "CMD", "curl", "-f", "http://localhost:8080/gics/gicsService?wsdl" ]
  #      interval: 5s
  #      timeout: 5s
  #      retries: 100
  #    ports:
  #    - ${GICS_PORT:-32080}:8080
  #
  #  ### gPAS
  #  gpas-db:
  #    image: creg.smith.care/fts/gpas-db:2023.1.2@sha256:4b13ae81ab1bcc0cd60110d6c5383d0e9c50c637899d4ba370ea27324d286c41
  #    command: --max_allowed_packet=20M --default-time-zone=Europe/Berlin
  #    healthcheck:
  #      test: [ "CMD", "/usr/bin/mysqladmin", "ping", "-h", "localhost", "-ugpas_user", "-pgpas_password" ]
  #      interval: 5s
  #      timeout: 5s
  #      retries: 20
  #  gpas:
  #    image: creg.smith.care/fts/gpas:2023.1.2@sha256:6ccc25c108060fe7dce34a776c60b24139b655796c51256600a86ad3d71818f6
  #    depends_on:
  #      gpas-db:
  #        condition: service_healthy
  #    entrypoint: /bin/bash
  #    command: -c "./wait-for-it.sh gpas-db:3306 -t 120 && ./run.sh"
  #    healthcheck:
  #      test: [ "CMD", "curl", "-f", "http://localhost:8080/gpas/gpasService?wsdl" ]
  #      interval: 5s
  #      timeout: 5s
  #      retries: 100
  #    ports:
  #    - ${GPAS_PORT:-32081}:8080

  valkey:
    image: valkey/valkey:latest

    ports:
    - :6379
